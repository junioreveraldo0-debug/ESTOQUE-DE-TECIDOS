(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{1118:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return n(3414)}])},3414:function(t,e,n){"use strict";n.r(e);var r=n(5893);n(9311);var o=n(9732);e.default=function(t){let{Component:e,pageProps:n}=t;return(0,r.jsx)(o.Ho,{children:(0,r.jsx)(e,{...n})})}},9732:function(t,e,n){"use strict";n.d(e,{Ho:function(){return a},aC:function(){return c}});var r=n(5893),o=n(7294),u=n(1163),i=n.n(u);let s=(0,o.createContext)();function a(t){let{children:e}=t,[n,u]=(0,o.useState)(null);(0,o.useEffect)(()=>{let t=localStorage.getItem("estoque_srj_user");t&&u(JSON.parse(t))},[]);let a=async(t,e)=>{let n=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:e})});if(n.ok){let e=await n.json();return localStorage.setItem("estoque_srj_user",JSON.stringify({username:t,token:e.token})),u({username:t,token:e.token}),i().push("/dashboard"),!0}throw Error((await n.json().catch(()=>({error:"Login failed"}))).error||"Login failed")};return(0,r.jsx)(s.Provider,{value:{user:n,login:a,logout:()=>{localStorage.removeItem("estoque_srj_user"),u(null),i().push("/")}},children:e})}function c(){return(0,o.useContext)(s)}},9311:function(){},1163:function(t,e,n){t.exports=n(9090)}},function(t){var e=function(e){return t(t.s=e)};t.O(0,[774,179],function(){return e(1118),e(9090)}),_N_E=t.O()}]);